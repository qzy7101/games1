<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
		<meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<link href="css/bksystem.css" rel="stylesheet" type="text/css" />
		<link href="skin/black/skin.css" rel="stylesheet" type="text/css" id="skin" />
		<link href="css/module.css" rel="stylesheet" type="text/css" />
		<link href="font/iconfont.css" rel="stylesheet" type="text/css" />
		<title>登录</title>
		<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
		<script src="js/jquery.cookie.js" type="text/javascript"></script>
		<script src="js/jquery.nicescroll.js" type="text/javascript"></script>
		<script src="js/BKframe.js" type="text/javascript"></script>
		<!--[if lt IE 9]>
          <script src="js/html5shiv.js" type="text/javascript"></script>
          <script src="js/css3-mediaqueries.js"  type="text/javascript"></script>
        <![endif]-->
	</head>
	<body class="login-layout Reg_log_style" id="loginstyle">
		<div class="logintop">
			<span>后台管理界面平台</span>
			<ul>
				<li>
					<a href="#">返回首页</a>
				</li>
				<li>
					<a href="#">帮助</a>
				</li>
				<li>
					<a href="#">关于</a>
				</li>
			</ul>
		</div>
		<div class="loginbody">
			<div class="login-container">
				<div class="center"> <img src="images/logo.png" /></div>
				<div class="space-6"></div>
				<div class="position-relative">
					<div id="login-box" class="login-box widget-box no-border visible">
						<div class="login-main">
							<!--皮肤选择-->
						<div class="skin-section">
							<a href="javascript:void(0)" class="skin-btn clickBombbox iconfont icon-pifushezhi" id="skin-btn"></a>
							<div class="Bombbox">
								<ul class="skin-list">
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="black" id="default" style="background-color:#222A2D"></a>
									</li>
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="blue" style="background-color:#438EB9;"></a>
									</li>
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="green" style="background-color:#72B63F;"></a>
									</li>
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="gray" style="background-color:#067350;"></a>
									</li>
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="red" style="background-color:#FF6868;"></a>
									</li>
									<li>
										<a class="colorpick-btn" href="javascript:void(0)" data-val="purple" style="background-color:#6F036B;"></a>
									</li>
								</ul>
							</div>
						</div>
							<div class="clearfix">
								<div class="login_icon"><img src="images/login_img.png" /></div>
								<form class="" style=" width:300px; float:right; margin-right:50px;">
									<h4 class="title_name"><img src="images/login_title.png" /></h4>
									<fieldset>
										<ul>
											<li class="frame_style form_error"><label class="user_icon iconfont">&#xe620;</label><input name="username" type="text"  id="username" /></li>
											<div id="username1"></div>
											<li class="frame_style form_error"><label class="password_icon iconfont">&#xe625;</label><input name="password" type="password"  id="password" /></li>
											<div id="password1"></div>
											<li class="frame_style form_error"><label class="Codes_icon iconfont">&#xe624;</label><input name="yzm"  type="text"  id="Codes_text" />
												<div class="Codes_region"><div id="checkCode" style="font-size: 15px" class="code"  onclick="createCode(4)" ></div></div>
												<div id="yzm1"></div>
											</li>
										</ul>
										<br>
										<div class="space"></div>
										<div class="clearfix">
											<label class="inline">
                                      <input type="checkbox" class="ace">
                                      <span class="lbl">保存密码</span>
                                  </label>
											<button type="button" class="login_btn" id="login_btn"> 登&nbsp;陆 </button>
										</div>

										<div class="space-4"></div>
									</fieldset>
								</form>
							</div>
							<div class="social-or-login center">
								<span class="bigger-110">通知</span>
							</div>
							<div class="social-login ">
								为了更好的体验性（兼容移动端），本网站系统不再对IE8（含IE8）以下浏览器支持，请见谅。
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="loginbm">版权所有 2016</div>
	</body>
</html>
<script type="text/javascript">

	var q1 = 1;
	var q2 = 1;
	var q3 = 1;


    //用户名正则验证
	$("#username").blur(function () {
		var uname = $(" input[ name='username' ] ").val()
		var reg=/^[a-zA-Z][a-zA-Z0-9]{3,9}$/;
		if(uname.length>0){
			if(reg.test(uname)==false) {
				document.getElementById("username1").innerHTML = "字母开头，4到10位";
			}else {
				document.getElementById("username1").innerHTML = "输入正确！";
				q1 = 2;
			}
		}else {
			document.getElementById("username1").innerHTML = "用户名不能为空";
		}
	})

	//密码正则验证
	$("#password").blur(function () {
		var upass = $(" input[ name='password' ] ").val()
		var reg=/^[a-zA-Z0-9]{4,10}$/;
		if(upass.length>0){
			if(reg.test(upass)==false) {
				document.getElementById("password1").innerHTML = "4到10位,不能含有非法字符";
			}else {
				document.getElementById("password1").innerHTML = "输入正确！";
				q2 = 2;
			}
		}else {
			document.getElementById("password1").innerHTML = "密码不能为空";
		}
	})


	//页面加载时，生成随机验证码
	window.onload=function(){
		createCode(4);
	}

	//检查验证码是否正确
	$("#Codes_text").blur(function () {
		validateCode();
	})

    //对比验证码
	function validateCode() {
		//获取显示区生成的验证码
		var checkCode = document.getElementById("checkCode").innerHTML;
		//获取输入的验证码
		var inputCode = document.getElementById("Codes_text").value;
		//console.log(checkCode);
		//console.log(inputCode);
		if (inputCode.length < 1) {
			document.getElementById("yzm1").innerHTML = "验证码不能为空";
		} else if (inputCode.toUpperCase() != checkCode.toUpperCase()) {
			document.getElementById("yzm1").innerHTML = "验证码输入有误";
			createCode(4);
		} else {
			document.getElementById("yzm1").innerHTML = "验证码正确";
			q3 = 2;
		}
	}

	//登陆
	$("#login_btn").on("click",function(){

		if (q1 > 1 && q2 > 1 && q3 > 1) {
			login();
		}else {
			document.getElementById("yzm1").innerHTML = "账号或密码错误";
		}

	})

	//登陆函数
	function login(){

		var admin = $(" input[ name='username' ] ").val();
		var upass = $("input[name='password']").val();
		$.ajax({
			type:"post",
			url:"../adminlogin?admin="+admin+"&upass="+upass,
			contentType: "application/json; charset=utf-8",
			success:function(data){
				if(data == 1){
					$.cookie('admin',admin)
					window.location = "index.html";
				}else {
					document.getElementById("register1").innerHTML = "账号或密码错误";
				}
			}
		})
	}


	//框架设置
	$(function() {
		$("#loginstyle").BKframe({
               //必须保留否则无法进行皮肤更换，以及兼容移动端
               
		})
	});


	//生成验证码的方法
	function createCode(length) {
		var code = "";
		var codeLength = parseInt(length); //验证码的长度
		var checkCode = document.getElementById("checkCode");
		////所有候选组成验证码的字符，当然也可以用中文的
		var codeChars = new Array(0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
				'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z',
				'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z');
		//循环组成验证码的字符串
		for (var i = 0; i < codeLength; i++)
		{
			//获取随机验证码下标
			var charNum = Math.floor(Math.random() * 62);
			//组合成指定字符验证码
			code += codeChars[charNum];
		}
		if (checkCode)
		{
			//为验证码区域添加样式名
			checkCode.className = "code";
			//将生成验证码赋值到显示区
			checkCode.innerHTML = code;
		}
	}




</script>
